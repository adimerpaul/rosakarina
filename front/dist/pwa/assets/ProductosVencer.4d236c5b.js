import{_ as g,O as c,P as V,Q as d,R as l,aI as b,T as e,U as n,aG as Q,aK as x,S as C,X as m,Y as k,Z as y,aH as P,V as h}from"./index.9c010100.js";import{Q as f}from"./QBadge.df1d9117.js";import{Q as q}from"./QMarkupTable.e7edda36.js";import{Q as B}from"./QPage.e8e4134a.js";import{h as p}from"./moment.40bc58bf.js";const D={name:"ProductosPorVencer",data(){return{valor:1,unidad:"meses",dias:1,productos:[],loading:!1}},mounted(){this.consultar()},methods:{consultar(){this.dias=this.convertirADias(this.valor,this.unidad),this.loading=!0,this.$axios.get("/productosPorVencer",{params:{dias:this.dias}}).then(o=>{this.productos=o.data}).catch(()=>{this.$alert.error("Error al consultar productos por vencer")}).finally(()=>{this.loading=!1})},convertirADias(o,a){switch(a){case"semanas":return o*7;case"meses":return o*30;case"anios":return o*365;default:return o}},diasRestantesColor(o){const a=p(),r=p(o).diff(a,"days"),t=Math.ceil(this.dias/3);return r<=t?{color:"red",dias:r}:r<=t*2?{color:"orange",dias:r}:{color:"green",dias:r}}}},R={class:"text-h6"},A={class:"row items-end q-col-gutter-md"},M={class:"col-12 col-md-2"},S={class:"col-12 col-md-6"},w={class:"col-12 col-md-2"};function E(o,a,_,r,t,i){return c(),V(B,{class:"q-pa-xs"},{default:d(()=>[l(P,{flat:"",bordered:""},{default:d(()=>[l(b,{class:"q-pa-xs"},{default:d(()=>[e("div",R,"Productos por vencer en "+n(t.dias)+" d\xEDas",1),e("div",A,[e("div",M,[l(Q,{modelValue:t.valor,"onUpdate:modelValue":a[0]||(a[0]=s=>t.valor=s),modelModifiers:{number:!0},type:"number",min:"1",label:"Cantidad",dense:"",outlined:""},null,8,["modelValue"])]),e("div",S,[l(x,{modelValue:t.unidad,"onUpdate:modelValue":a[1]||(a[1]=s=>t.unidad=s),options:[{label:"D\xEDas",value:"dias"},{label:"Semanas",value:"semanas"},{label:"Meses",value:"meses"},{label:"A\xF1os",value:"anios"}],type:"radio",inline:"",dense:""},null,8,["modelValue"])]),e("div",w,[l(C,{label:"Consultar",color:"green",icon:"search",class:"q-mt-sm",onClick:i.consultar,loading:t.loading,"no-caps":""},null,8,["onClick","loading"])])]),l(q,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:d(()=>[a[2]||(a[2]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Producto"),e("th",null,"Cantidad"),e("th",null,"Lote"),e("th",null,"Fecha de Vencimiento"),e("th",null,"Estado"),e("th",null,"D\xEDas restantes")])],-1)),e("tbody",null,[(c(!0),m(y,null,k(t.productos,(s,v)=>{var u;return c(),m("tr",{key:s.id},[e("td",null,n(v+1),1),e("td",null,n((u=s.producto)==null?void 0:u.nombre),1),e("td",null,n(s.cantidad_venta),1),e("td",null,n(s.lote),1),e("td",null,n(s.fecha_vencimiento),1),e("td",null,[l(f,{color:s.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:d(()=>[h(n(s.estado),1)]),_:2},1032,["color"])]),e("td",null,[l(f,{color:i.diasRestantesColor(s.fecha_vencimiento).color,class:"q-pa-xs"},{default:d(()=>[h(n(i.diasRestantesColor(s.fecha_vencimiento).dias)+" d\xEDas ",1)]),_:2},1032,["color"])])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var I=g(D,[["render",E]]);export{I as default};
