import{ag as N,ah as B,_ as U,aY as z,O as m,P,Q as s,T as o,R as e,$ as g,S as f,W as y,aG as I,aI as c,a1 as q,U as n,V as h,aH as u,X as _,Z as C,Y as Q,a0 as k,J as T,aJ as D,bm as V}from"./index.9c010100.js";import{Q as v}from"./QSpace.fb837107.js";import{Q as F}from"./QBadge.df1d9117.js";import{Q as w}from"./QChip.05a357ca.js";import{Q as b}from"./QSkeleton.08ed60e9.js";import{Q as S}from"./QImg.ab3823d5.js";import{Q as E}from"./QSelect.51597d4d.js";import{Q as A}from"./QPagination.6b5052fc.js";import{Q as H}from"./QPage.e8e4134a.js";import{C as J}from"./ClosePopup.8b267fec.js";import"./QMenu.861e4e49.js";import"./QItemLabel.562f2e38.js";import"./format.2cae61da.js";function L(a){const t=document.createElement("textarea");t.value=a,t.contentEditable="true",t.style.position="fixed";const d=()=>{};N(d),document.body.appendChild(t),t.focus(),t.select();const x=document.execCommand("copy");return t.remove(),B(d),x}function M(a){return navigator.clipboard!==void 0?navigator.clipboard.writeText(a):new Promise((t,d)=>{const x=L(a);x?t(!0):d(x)})}const O={name:"ProductosPreciosPage",data(){return{loading:!1,productos:[],filters:{search:""},pagination:{page:1,rowsPerPage:24,rowsNumber:0},preview:{open:!1,item:null}}},computed:{maxPages(){return Math.ceil((this.pagination.rowsNumber||0)/(this.pagination.rowsPerPage||1))||1}},mounted(){this.fetchProductos=z(this.fetchProductos,150),this.fetchProductos()},methods:{imgSrc(a){return a?`${this.$url}../images/${a}`:""},formatPrice(a){return Number(a||0).toLocaleString("es-BO",{minimumFractionDigits:2,maximumFractionDigits:2})},clearSearch(){this.filters.search="",this.pagination.page=1,this.fetchProductos()},changePerPage(){this.pagination.page=1,this.fetchProductos()},openPreview(a){this.preview.item={...a},this.preview.open=!0},async copyPrice(a){try{const t=`${(a==null?void 0:a.nombre)||""} - ${this.formatPrice(a==null?void 0:a.precio)}`;await M(t),this.$alert.success("Copiado: "+t)}catch{this.$alert.error("No se pudo copiar")}},fetchProductos(){this.loading=!0,this.$axios.get("productos-precios",{params:{search:this.filters.search,page:this.pagination.page,per_page:this.pagination.rowsPerPage}}).then(a=>{this.productos=a.data.data||[],this.pagination.rowsNumber=a.data.total||0}).catch(a=>{var t,d;this.$alert.error(((d=(t=a.response)==null?void 0:t.data)==null?void 0:d.message)||"Error al cargar cat\xE1logo")}).finally(()=>{this.loading=!1})}}},Y={class:"row items-center q-col-gutter-md q-mb-md"},G={class:"col-12 col-md-5"},R={class:"col-12 col-md-auto"},W={class:"row q-col-gutter-md q-mb-md"},X={class:"col-12 col-sm-6 col-md-3"},Z={class:"q-ml-md"},j={class:"text-h6 text-weight-bold"},K={class:"col-12 col-sm-6 col-md-3"},$={class:"q-ml-md"},ee={class:"text-h6 text-weight-bold"},te={class:"col-12 col-md-6"},oe={class:"row items-center q-mb-sm"},se={key:0,class:"row q-col-gutter-md"},ae={key:1,class:"row q-col-gutter-md"},re={class:"absolute-full flex flex-center bg-grey-3 text-grey-7"},le={class:"absolute-top-left q-pa-sm"},ie={class:"absolute-bottom q-pa-sm overlay"},ce={class:"text-subtitle2 text-weight-bold ellipsis"},ne={class:"row items-center"},de={class:"row q-col-gutter-xs q-mt-sm"},me={class:"col"},ue={class:"col"},pe={key:0,class:"col-12"},ge={class:"row items-center q-col-gutter-sm"},fe={class:"col-12 col-md-auto"},he={class:"col"},_e={class:"flex flex-center"},ve={class:"text-subtitle1 text-weight-bold ellipsis"},xe={class:"row items-center q-mt-md"};function we(a,t,d,x,l,i){return m(),P(H,{class:"q-pa-md bg"},{default:s(()=>[o("div",Y,[t[5]||(t[5]=o("div",{class:"col-12 col-md"},[o("div",{class:"text-h5 text-weight-bold title"}," Cat\xE1logo de Precios "),o("div",{class:"text-caption text-grey-6"}," Solo nombre, imagen y precio \u2014 r\xE1pido y bonito. ")],-1)),o("div",G,[e(I,{modelValue:l.filters.search,"onUpdate:modelValue":[t[0]||(t[0]=r=>l.filters.search=r),i.fetchProductos],dense:"",outlined:"",rounded:"",debounce:"350",placeholder:"Buscar producto\u2026",class:"glass"},{prepend:s(()=>[e(g,{name:"search"})]),append:s(()=>[l.filters.search?(m(),P(f,{key:0,flat:"",round:"",dense:"",icon:"close",onClick:i.clearSearch},null,8,["onClick"])):y("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"])]),o("div",R,[e(f,{color:"primary",rounded:"","no-caps":"",icon:"refresh",label:"Actualizar",loading:l.loading,onClick:i.fetchProductos,class:"btn-soft"},null,8,["loading","onClick"])])]),o("div",W,[o("div",X,[e(u,{class:"glass card-soft",flat:"",bordered:""},{default:s(()=>[e(c,{class:"row items-center no-wrap"},{default:s(()=>[e(q,{size:"42px",class:"bg-primary text-white"},{default:s(()=>[e(g,{name:"inventory_2"})]),_:1}),o("div",Z,[t[6]||(t[6]=o("div",{class:"text-caption text-grey-6"},"Total",-1)),o("div",j,n(l.pagination.rowsNumber),1)]),e(v),e(F,{color:"primary",outline:""},{default:s(()=>[h(n(l.pagination.page)+"/"+n(i.maxPages),1)]),_:1})]),_:1})]),_:1})]),o("div",K,[e(u,{class:"glass card-soft",flat:"",bordered:""},{default:s(()=>[e(c,{class:"row items-center no-wrap"},{default:s(()=>[e(q,{size:"42px",class:"bg-green text-white"},{default:s(()=>[e(g,{name:"sell"})]),_:1}),o("div",$,[t[7]||(t[7]=o("div",{class:"text-caption text-grey-6"},"Vista",-1)),o("div",ee,n(l.productos.length),1)]),e(v),e(w,{dense:"",color:"green","text-color":"white",icon:"verified",class:"q-ma-none"},{default:s(()=>t[8]||(t[8]=[h(" Precios ")])),_:1})]),_:1})]),_:1})]),o("div",te,[e(u,{class:"glass card-soft",flat:"",bordered:""},{default:s(()=>[e(c,{class:"row items-center"},{default:s(()=>[e(g,{name:"tips_and_updates",size:"24px",class:"text-amber"}),t[9]||(t[9]=o("div",{class:"q-ml-sm"},[o("div",{class:"text-subtitle2 text-weight-bold"},"Tip"),o("div",{class:"text-caption text-grey-6"}," Haz click en un producto para ver la imagen grande y copiar el precio. ")],-1))]),_:1})]),_:1})])]),e(u,{class:"glass",flat:"",bordered:""},{default:s(()=>[e(c,{class:"q-pa-md"},{default:s(()=>[o("div",oe,[t[10]||(t[10]=o("div",{class:"text-subtitle1 text-weight-bold"},"Productos",-1)),e(v),e(w,{dense:"",outline:"",icon:"grid_view",class:"q-ma-none"},{default:s(()=>[h(n(l.pagination.rowsPerPage)+" por p\xE1gina ",1)]),_:1})]),l.loading?(m(),_("div",se,[(m(),_(C,null,Q(12,r=>o("div",{key:r,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(u,{flat:"",bordered:"",class:"card-soft"},{default:s(()=>[e(b,{height:"170px"}),e(c,null,{default:s(()=>[e(b,{type:"text"}),e(b,{type:"text",width:"60%"})]),_:1})]),_:1})])),64))])):(m(),_("div",ae,[(m(!0),_(C,null,Q(l.productos,r=>(m(),_("div",{key:r.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(u,{flat:"",bordered:"",class:"card-soft card-hover",onClick:p=>i.openPreview(r)},{default:s(()=>[e(S,{src:i.imgSrc(r.imagen),ratio:"1",class:"rounded-top","spinner-color":"primary"},{error:s(()=>[o("div",re,[e(g,{name:"image_not_supported",size:"28px"})])]),default:s(()=>[o("div",le,[e(w,{dense:"",color:"primary","text-color":"white",icon:"photo",class:"q-ma-none"},{default:s(()=>t[11]||(t[11]=[h(" Imagen ")])),_:1})]),o("div",ie,[o("div",ce,n(r.nombre),1)])]),_:2},1032,["src"]),e(k),e(c,{class:"q-pa-sm"},{default:s(()=>[o("div",ne,[t[12]||(t[12]=o("div",{class:"text-caption text-grey-6"},"Precio",-1)),e(v),e(w,{dense:"",color:"green","text-color":"white",icon:"attach_money",class:"q-ma-none"},{default:s(()=>[h(n(i.formatPrice(r.precio)),1)]),_:2},1024)]),o("div",de,[o("div",me,[e(f,{dense:"",rounded:"","no-caps":"",outline:"",icon:"content_copy",label:"Copiar",class:"full-width",onClick:V(p=>i.copyPrice(r),["stop"])},null,8,["onClick"])]),o("div",ue,[e(f,{dense:"",rounded:"","no-caps":"",color:"primary",icon:"visibility",label:"Ver",class:"full-width btn-soft",onClick:V(p=>i.openPreview(r),["stop"])},null,8,["onClick"])])])]),_:2},1024)]),_:2},1032,["onClick"])]))),128)),l.productos.length?y("",!0):(m(),_("div",pe,[e(u,{flat:"",bordered:"",class:"card-soft"},{default:s(()=>[e(c,{class:"row items-center"},{default:s(()=>[e(g,{name:"search_off",size:"28px",class:"text-grey-6"}),t[13]||(t[13]=o("div",{class:"q-ml-sm"},[o("div",{class:"text-subtitle2 text-weight-bold"},"Sin resultados"),o("div",{class:"text-caption text-grey-6"},"Prueba con otro texto de b\xFAsqueda.")],-1))]),_:1})]),_:1})]))]))]),_:1}),e(k),e(c,{class:"q-pa-sm"},{default:s(()=>[o("div",ge,[o("div",fe,[e(E,{modelValue:l.pagination.rowsPerPage,"onUpdate:modelValue":[t[1]||(t[1]=r=>l.pagination.rowsPerPage=r),i.changePerPage],options:[12,24,48,96],dense:"",outlined:"",rounded:"",label:"Por p\xE1gina",class:"glass"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",he,[o("div",_e,[e(A,{modelValue:l.pagination.page,"onUpdate:modelValue":[t[2]||(t[2]=r=>l.pagination.page=r),i.fetchProductos],max:i.maxPages,color:"primary","boundary-numbers":"","max-pages":"8"},null,8,["modelValue","max","onUpdate:modelValue"])])])])]),_:1})]),_:1}),e(D,{modelValue:l.preview.open,"onUpdate:modelValue":t[4]||(t[4]=r=>l.preview.open=r)},{default:s(()=>[e(u,{style:{width:"520px","max-width":"92vw"},class:"card-soft"},{default:s(()=>[e(c,{class:"row items-center q-pb-none"},{default:s(()=>{var r;return[o("div",ve,n((r=l.preview.item)==null?void 0:r.nombre),1),e(v),T(e(f,{icon:"close",flat:"",round:"",dense:""},null,512),[[J]])]}),_:1}),e(c,{class:"q-pt-sm"},{default:s(()=>{var r;return[e(S,{src:i.imgSrc((r=l.preview.item)==null?void 0:r.imagen),ratio:"1",class:"rounded","spinner-color":"primary"},null,8,["src"]),o("div",xe,[e(w,{color:"green","text-color":"white",icon:"attach_money"},{default:s(()=>{var p;return[h(n(i.formatPrice((p=l.preview.item)==null?void 0:p.precio)),1)]}),_:1}),e(v),e(f,{rounded:"","no-caps":"",outline:"",icon:"content_copy",label:"Copiar precio",onClick:t[3]||(t[3]=p=>i.copyPrice(l.preview.item))})])]}),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ie=U(O,[["render",we],["__scopeId","data-v-5f6edaff"]]);export{Ie as default};
